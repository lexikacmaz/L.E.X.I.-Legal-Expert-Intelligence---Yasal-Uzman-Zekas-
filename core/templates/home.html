{% load static %}
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEXI | Sovereign Legal AI</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- ROYAL & ELITE PALET (AYNEN KORUNDU) --- */
        :root {
            --bg-body: #020617; 
            --bg-card: rgba(15, 23, 42, 0.6);
            --gold-gradient: linear-gradient(135deg, #BF953F, #FCF6BA, #B38728, #FBF5B7, #AA771C);
            --gold-solid: #C5A028;
            --text-white: #F8FAFC;
            --text-grey: #94A3B8;
            --border-elite: 1px solid rgba(197, 160, 40, 0.15);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-body);
            background-image: radial-gradient(circle at 50% -20%, #1e293b 0%, #020617 80%);
            color: var(--text-white);
            font-family: 'Montserrat', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        /* --- NAVİGASYON --- */
        nav { display: flex; justify-content: space-between; align-items: center; padding: 30px 80px; backdrop-filter: blur(5px); border-bottom: 1px solid rgba(255,255,255,0.03); }
        .logo { font-family: 'Cormorant Garamond', serif; font-size: 2.5rem; font-weight: 700; letter-spacing: 2px; background: var(--gold-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-style: italic; }
        .nav-menu { display: flex; gap: 50px; align-items: center; }
        .nav-menu a { text-decoration: none; color: var(--text-grey); font-size: 0.85rem; text-transform: uppercase; letter-spacing: 2px; transition: 0.4s ease; }
        .nav-menu a:hover { color: var(--text-white); text-shadow: 0 0 10px rgba(255,255,255,0.5); }
        .btn-login { padding: 10px 35px; border: 1px solid rgba(255, 255, 255, 0.2); color: var(--text-white) !important; font-size: 0.8rem; letter-spacing: 1px; transition: 0.4s; position: relative; overflow: hidden; }
        .btn-login:hover { border-color: var(--gold-solid); background: rgba(197, 160, 40, 0.05); box-shadow: 0 0 20px rgba(197, 160, 40, 0.1); }

        /* --- HERO --- */
        .hero { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px 20px; position: relative; }
        h1.title { font-family: 'Cormorant Garamond', serif; font-size: 5.5rem; font-weight: 600; line-height: 1.1; margin-bottom: 15px; letter-spacing: -1px; text-align: center; background: var(--gold-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        p.subtitle { font-size: 1.2rem; color: var(--text-grey); font-weight: 300; letter-spacing: 1px; margin-bottom: 90px; text-transform: uppercase; opacity: 0.8; }

        /* --- KARTLAR --- */
        .cards-container { display: flex; gap: 30px; margin-bottom: 90px; width: 100%; max-width: 1200px; justify-content: center; flex-wrap: wrap; }
        .card { flex: 1; min-width: 320px; background: var(--bg-card); border: var(--border-elite); padding: 60px 40px; text-align: center; transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94); position: relative; backdrop-filter: blur(12px); box-shadow: 0 4px 20px rgba(0,0,0,0.3); cursor: pointer; }
        .card:hover { transform: translateY(-15px); border-color: var(--gold-solid); box-shadow: 0 20px 50px rgba(0,0,0,0.6), 0 0 30px rgba(197, 160, 40, 0.1); }
        .icon-box { font-size: 2rem; background: var(--gold-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 30px; display: inline-block; }
        .card h3 { font-family: 'Cormorant Garamond', serif; font-size: 2rem; font-weight: 600; color: var(--text-white); margin-bottom: 20px; font-style: italic; }
        .card p { font-size: 0.9rem; color: var(--text-grey); line-height: 1.8; font-weight: 300; }

        /* --- ARAMA ALANI --- */
        .search-area { width: 100%; max-width: 800px; display: flex; flex-direction: column; align-items: center; }
        .input-group { position: relative; width: 100%; }
        .search-input { width: 100%; padding: 25px 30px; background: rgba(2, 6, 23, 0.8); border: 1px solid rgba(255,255,255,0.1); color: var(--text-white); font-family: 'Cormorant Garamond', serif; font-size: 1.3rem; font-style: italic; outline: none; transition: 0.4s; }
        .search-input::placeholder { color: rgba(255, 255, 255, 0.2); font-family: 'Montserrat', sans-serif; font-style: normal; font-size: 0.9rem; letter-spacing: 1px; }
        .search-input:focus { border-color: var(--gold-solid); box-shadow: 0 0 40px rgba(197, 160, 40, 0.15); }
        .send-btn { position: absolute; right: 0; top: 0; height: 100%; width: 80px; background: transparent; border: none; color: var(--text-grey); font-size: 1.2rem; cursor: pointer; transition: 0.3s; }
        .send-btn:hover { color: var(--gold-solid); }

        /* --- CEVAP KUTUSU (GİZLİ BAŞLAR) --- */
        .response-box {
            width: 100%; margin-top: 40px; padding: 40px;
            background: rgba(10, 15, 30, 0.95); 
            border: 1px solid var(--gold-solid);
            border-left: 5px solid var(--gold-solid);
            color: #e2e8f0; font-size: 1.1rem; line-height: 1.8;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            display: none; /* JS ile açılacak */
            animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            text-align: left;
            position: relative;
        }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: 0; } }

        /* --- YENİ EKLENEN: YÜKLENİYOR EKRANI (LÜKS VERSİYON) --- */
        #loading-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(2, 6, 23, 0.85); /* Arka planı hafif karart */
            backdrop-filter: blur(8px);
            display: none; /* Başlangıçta gizli */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 50;
            border-radius: 4px;
        }

        /* Altın Dönen Halka */
        .spinner {
            width: 60px; height: 60px;
            border: 3px solid rgba(197, 160, 40, 0.2);
            border-top: 3px solid var(--gold-solid);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 25px;
            box-shadow: 0 0 20px rgba(197, 160, 40, 0.2);
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .loading-text { 
            font-family: 'Cormorant Garamond', serif; 
            font-size: 1.5rem; 
            color: var(--gold-solid); 
            font-style: italic;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }

        /* --- FOOTER --- */
        footer { text-align: center; padding: 40px; font-family: 'Cormorant Garamond', serif; color: rgba(255, 255, 255, 0.2); font-size: 1rem; font-style: italic; margin-top: auto; }
    </style>
</head>
<body>

    <nav>
        <div class="logo">L.E.X.I</div>
        <div class="nav-menu">
            <a href="{% url 'avukatlar' %}">UZMANLAR</a>
            <a href="{% url 'paketler' %}">PAKETLER</a>
            {% if user.is_authenticated %}
                <a href="{% url 'cikis_yap' %}">ÇIKIŞ</a>
            {% else %}
                <a href="{% url 'beta_giris' %}">GİRİŞ</a>
            {% endif %}
        </div>
    </nav>

    <div class="hero">
        
        <h1 class="title">LEGAL INTELLIGENCE</h1>
        <p class="subtitle">Egemen Hukuk. Kusursuz Zeka.</p>

        <div class="cards-container">
            <div class="card" onclick="setCategory('kira-hukuku')">
                <div class="icon-box"><i class="fa-solid fa-house-chimney"></i></div>
                <h3>Kira Hukuku</h3>
                <p>Mülk yönetimi ve tahliye süreçlerinde stratejik analizler.</p>
            </div>
            <div class="card" style="opacity:0.5; cursor: default;">
                <div class="icon-box"><i class="fa-solid fa-briefcase"></i></div>
                <h3>İş Hukuku</h3>
                <p>Yakında Hizmetinizde</p>
            </div>
            <div class="card" style="opacity:0.5; cursor: default;">
                <div class="icon-box"><i class="fa-solid fa-scale-balanced"></i></div>
                <h3>Ceza Hukuku</h3>
                <p>Yakında Hizmetinizde</p>
            </div>
        </div>

        <div class="search-area">
            
            <div id="loading-overlay">
                <div class="spinner"></div>
                <div class="loading-text" id="loading-text">Analiz Ediliyor...</div>
            </div>

            <form id="chatForm" method="POST" style="width: 100%;">
                {% csrf_token %}
                <input type="hidden" name="bot_slug" id="bot_slug" value="kira-hukuku">
                
                <div class="input-group">
                    <input type="text" name="soru" id="soruInput" class="search-input" placeholder="Vakanızı veya sorunuzu buraya yazın..." required autocomplete="off">
                    <button type="submit" class="send-btn">
                        <i class="fa-solid fa-arrow-right-long"></i>
                    </button>
                </div>
            </form>
            
            {% if cevap %}
            <div class="response-box" style="display: block;">
                {{ cevap|safe }}
            </div>
            {% endif %}
        </div>

    </div>

    <footer>
        &copy; 2025 LEXI. The Art of Law & Logic.
    </footer>

    <script>
        // 1. Form Gönderilince Çalışacak Animasyon
        const form = document.getElementById('chatForm');
        const loadingOverlay = document.getElementById('loading-overlay');
        const loadingText = document.getElementById('loading-text');
        
        // Animasyon mesajları
        const steps = [
            "Mevzuat Taranıyor...",
            "Yargıtay Kararları İnceleniyor...",
            "Hukuki Gerekçeler Oluşturuluyor..."
        ];

        form.addEventListener('submit', function() {
            // Yükleniyor ekranını aç
            loadingOverlay.style.display = 'flex';
            
            // Mesajları döngüye sok
            let i = 0;
            loadingText.innerText = steps[0];
            setInterval(() => {
                i = (i + 1) % steps.length;
                loadingText.innerText = steps[i];
            }, 2000); // 2 saniyede bir değişir
        });

        // 2. Kategori Seçimi (Kartlara Tıklayınca)
        function setCategory(slug) {
            document.getElementById('bot_slug').value = slug;
            const input = document.getElementById('soruInput');
            input.placeholder = "Kira Hukuku ile ilgili sorunuzu yazın...";
            input.focus();
            
            // Hafif kaydırma efekti
            input.scrollIntoView({behavior: "smooth", block: "center"});
        }
    </script>

</body>
</html>